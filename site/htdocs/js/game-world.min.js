function init(){gameCanvas=document.getElementById("gameWorld"),gameCanvas.getContext&&(gameContext=gameCanvas.getContext("2d"),canvasWidth=gameCanvas.width,canvasHeight=gameCanvas.height),gameMode="loading",gameLoop(),heroSprite.src="/images/game-world/core/TEMP-link.png",Input.init(),gameMode="play"}function gameLoop(){setTimeout(function(){switch(window.requestAnimationFrame(gameLoop),gameMode){case"loading":break;case"paused":break;case"play":update(),draw()}},1e3/framesPerSecond)}function update(){key[2]&&(hero.y-=4),key[3]&&(hero.y+=4),key[0]&&(hero.x-=4),key[1]&&(hero.x+=4)}function draw(){gameContext.clearRect(0,0,256,224),gameContext.drawImage(heroSprite,0,0,16,25,hero.x,hero.y,16,25)}var framesPerSecond=24,tileWidth=40,heroSprite=new Image,key=[0,0,0,0,0],hero={x:100,y:100,speed:4};!function(){for(var e=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[n[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[a]+"CancelAnimationFrame"]||window[n[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,a){var t=(new Date).getTime(),o=Math.max(0,16-(t-e)),i=window.setTimeout(function(){n(t+o)},o);return e=t+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var Input={init:function(){document.addEventListener("keydown",function(e){Input.changeKey(e.keyCode,1)}),document.addEventListener("keyup",function(e){Input.changeKey(e.keyCode,0)})},changeKey:function(e,n){switch(e){case 37:key[0]=n;break;case 38:key[2]=n;break;case 39:key[1]=n;break;case 40:key[3]=n;break;case 32:key[4]=n;break;case 91:key[5]=n;break;case 88:key[6]=n;break;case 90:key[7]=n}}};"querySelectorAll"in document&&"addEventListener"in window&&window.HTMLCanvasElement&&init();