function whichAnimationEvent(){var e,t=document.createElement("fakeelement"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}function whichTransitionEvent(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}function createCookie(e,t,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var a="; expires="+i.toGMTString()}else a="";document.cookie=e+"="+t+a+"; path=/"}function readCookie(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var a=n[i];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return null}function supportsCanvas(){return!!window.HTMLCanvasElement}function domReady(){setUpNavigation()}document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),domReady()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),domReady())});var doc=document.body||document.documentElement,style=doc.style;function getStyle(e,t){var n=document.getElementById(e);if(n.currentStyle)var i=n.currentStyle[t];else if(window.getComputedStyle)i=document.defaultView.getComputedStyle(n,null).getPropertyValue(t);return i}""!=style.webkitFlexWrap&&""!=style.msFlexWrap&&""!=style.flexWrap||(document.documentElement.className+=" supports-flex");var ae=new Object;function addClass(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function hasParent(e,t){if(e)do{if(e.id===t)return!0;if(9===e.nodeType)break}while(e=e.parentNode);return!1}function hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}var getJSON=function(e,t,n){var i="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("get",e,!0),i.onreadystatechange=function(){var e,a;if(4==i.readyState){var o=!0;if(200==(e=i.status)){try{a=JSON.parse(i.responseText)}catch(t){o=!1,n&&n(e)}o&&t&&t(a)}else n&&n(e)}},i.send()};function AccordionWidget(e,t){e&&(this.el=e,this.accordionTriggers=this.el.getElementsByClassName("js-accordion-trigger"),this.accordionPanels=this.el.getElementsByClassName("js-accordion-panel"),0!==this.accordionTriggers.length&&this.accordionTriggers.length===this.accordionPanels.length&&this.init(t))}AccordionWidget.prototype.init=function(e){var t;this.accordionTriggersLength=this.accordionTriggers.length,this.expandedAccordions=new Array(this.accordionTriggersLength),this.multiSelectable=this.el.hasAttribute("aria-multiselectable"),this.keys={prev:38,next:40,space:32};for(var n=0;n<this.accordionTriggersLength;n++)this.accordionTriggers[n].index=n,this.accordionTriggers[n].addEventListener("click",this.accordionClick.bind(this),!1),this.accordionTriggers[n].addEventListener("keydown",this.accordionCursor.bind(this),!1),this.accordionTriggers[n].addEventListener("focus",this.accordionFocus.bind(this),!1),this.accordionTriggers[n].classList.contains("is-selected")&&(this.expandedAccordions[n]=!0);isNaN(e)?(t=this.expandedAccordions.lastIndexOf(!0),this.multiSelectable||(this.expandedAccordions=new Array(this.accordionTriggersLength),this.expandedAccordions[t]=!0)):(t=e<this.accordionTriggersLength?e:this.accordionTriggersLength-1,this.expandedAccordions=new Array(this.accordionTriggersLength),this.expandedAccordions[t]=!0),this.setSelected(t),this.setExpanded(),this.el.classList.add("is-initialized")},AccordionWidget.prototype.accordionClick=function(e){e.preventDefault(),this.setSelected(e.target.index,!0),this.setExpanded(e.target.index,!0)},AccordionWidget.prototype.accordionCursor=function(e){var t;if(e.keyCode===this.keys.space||e.keyCode===this.keys.prev||e.keyCode===this.keys.next)if(e.preventDefault(),e.keyCode!==this.keys.space){if(e.keyCode===this.keys.prev&&e.target.index>0)t=e.target.index-1;else{if(!(e.keyCode===this.keys.next&&e.target.index<this.accordionTriggersLength-1))return;t=e.target.index+1}this.setSelected(t,!0)}else this.setExpanded(e.target.index,!0)},AccordionWidget.prototype.accordionFocus=function(){1===this.accordionTriggersLength&&this.setSelected(0)},AccordionWidget.prototype.setSelected=function(e,t){if(-1!==e)for(var n=0;n<this.accordionTriggersLength;n++)n===e?(this.accordionTriggers[n].classList.add("is-selected"),this.accordionTriggers[n].setAttribute("aria-selected",!0),this.accordionTriggers[n].setAttribute("tabindex",0),t&&this.accordionTriggers[n].focus()):(this.accordionTriggers[n].classList.remove("is-selected"),this.accordionTriggers[n].setAttribute("aria-selected",!1),this.accordionTriggers[n].setAttribute("tabindex",-1));else this.accordionTriggers[0].setAttribute("tabindex",0)},AccordionWidget.prototype.setExpanded=function(e,t){var n;if(t)if(this.multiSelectable)this.expandedAccordions[e]=!this.expandedAccordions[e];else for(n=0;n<this.accordionTriggersLength;n++)this.expandedAccordions[n]=n===e&&!this.expandedAccordions[n];for(n=0;n<this.accordionTriggersLength;n++)this.expandedAccordions[n]?(this.accordionTriggers[n].setAttribute("aria-expanded",!0),this.accordionTriggers[n].classList.add("is-expanded"),this.accordionPanels[n].setAttribute("aria-hidden",!1),this.accordionPanels[n].classList.remove("is-hidden"),this.accordionPanels[n].setAttribute("tabindex",0)):(this.accordionTriggers[n].setAttribute("aria-expanded",!1),this.accordionTriggers[n].classList.remove("is-expanded"),this.accordionPanels[n].classList.add("is-hidden"),this.accordionPanels[n].setAttribute("tabindex",-1))};var animatedElements=document.getElementsByClassName("js-accordion-panel"),transitionEvent=whichTransitionEvent();if(transitionEvent)for(var i=0;i<animatedElements.length;i++)animatedElements[i].addEventListener(transitionEvent,function(){hasClass(this,"is-hidden")?this.setAttribute("aria-hidden",!0):this.setAttribute("aria-hidden",!1)});if(cutsTheMustard){var accordionElements=document.getElementsByClassName("accordion-interface");for(accordionCount=accordionElements.length,i=0;i<accordionCount;i++)new AccordionWidget(accordionElements[i],0)}function toggleNavElem(e,t){thisNavId=e.getAttribute("aria-controls"),thisNavId&&(t.preventDefault(),thisNavContent=document.getElementById(thisNavId),"true"==thisNavContent.getAttribute("aria-hidden")?(thisNavContent.setAttribute("aria-hidden","false"),e.setAttribute("aria-expanded","true")):(thisNavContent.setAttribute("aria-hidden","true"),e.setAttribute("aria-expanded","false")))}function setUpNavigation(){if(cutsTheMustard)for(navElementsWithChildren=document.querySelectorAll("#navigation [aria-controls]"),navCount=navElementsWithChildren.length,i=0;i<navCount;i++)thisNavId=navElementsWithChildren[i].getAttribute("aria-controls"),thisNavContent=document.getElementById(thisNavId),thisNavContent.setAttribute("aria-hidden","true"),thisNavContent.setAttribute("tabindex","-1"),navElementsWithChildren[i].setAttribute("aria-expanded","false"),navElementsWithChildren[i].parentNode.parentNode.addEventListener("click",navigationReaction,!1)}function debounce(e,t,n){var i;return function(){var a=this,o=arguments,r=n&&!i;clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(a,o)},t),r&&e.apply(a,o)}}!function(e){"use strict";function t(e){return n(["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'].join(","),e).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})}function n(e,t){return Array.prototype.slice.call((t||document).querySelectorAll(e)||[])}function i(e){var n=t(e);n.length&&n[0].focus()}var a;e.A11yDialog=function(e,o){var r=this;function s(){r.shown=!0,e.removeAttribute("aria-hidden"),o.setAttribute("aria-hidden","true"),a=document.activeElement,i(e)}function d(){r.shown=!1,e.setAttribute("aria-hidden","true"),o.removeAttribute("aria-hidden"),a.focus()}o=o||document.querySelector("#main"),this.shown=!1,this.show=s,this.hide=d,n('[data-a11y-dialog-show="'+e.id+'"]').forEach(function(e){e.addEventListener("click",s)}),n("[data-a11y-dialog-hide]",e).concat(n('[data-a11y-dialog-hide="'+e.id+'"]')).forEach(function(e){e.addEventListener("click",d)}),document.addEventListener("keydown",function(n){r.shown&&27===n.which&&(n.preventDefault(),d()),r.shown&&9===n.which&&function(e,n){var i=t(e),a=i.indexOf(document.activeElement);n.shiftKey&&0===a?(i[i.length-1].focus(),n.preventDefault()):n.shiftKey||a!==i.length-1||(i[0].focus(),n.preventDefault())}(e,n)}),document.body.addEventListener("focus",function(t){r.shown&&!e.contains(t.target)&&i(e)},!0)}}(window),navigationReaction=function(e){target=e.target||e.srcElement,toggleNavElem(target,e)},function(e,t,n){if(cutsTheMustard){var i=e.querySelectorAll(".fileInput");Array.prototype.forEach.call(i,function(e){var t=e.nextElementSibling,n=t.innerHTML;e.addEventListener("change",function(e){var i="";(i=this.files&&this.files.length>1?(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value.split("\\").pop())?t.querySelector("span").innerHTML=i:t.innerHTML=n})})}}(document,window);var dragAndDropForm=document.getElementById("dragAndDropUpload"),isAdvancedUpload=function(){return("draggable"in dragAndDropForm||"ondragstart"in dragAndDropForm&&"ondrop"in dragAndDropForm)&&"FormData"in window&&"FileReader"in window};function dragDropEnter(e){e.stopPropagation(),e.preventDefault()}function dragDropOver(e){e.stopPropagation(),e.preventDefault(),dragAndDropForm.classList.add("isDraggedOver")}function dragDropLeave(e){e.stopPropagation(),e.preventDefault(),dragAndDropForm.classList.remove("isDraggedOver")}function dragDropDrop(e){e.stopPropagation(),e.preventDefault(),dragAndDropForm.classList.remove("isDraggedOver"),dragDropHandleFiles(e.dataTransfer.files)}function dragDropHandleFiles(e){for(var t=0;t<e.length;t++)dragDropFileUpload(e[t])}function unloadPrompt(e){var t="Upload not complete - are you sure want to leave this page yet?";return e.returnValue=t,t}function dragDropFileUpload(e){window.addEventListener("beforeunload",unloadPrompt,!1);var t,n=new XMLHttpRequest,i=new FormData;if(progressBar=document.getElementById("progessBar"),this.xhr=n,this.xhr.upload.addEventListener("progress",function(e){e.lengthComputable&&(progressBar.value=Math.round(100*e.loaded/e.total))},!1),n.upload.addEventListener("load",function(e){window.removeEventListener("beforeunload",unloadPrompt,!1),progressBar.value="100"},!1),n.open("POST",dragAndDropForm.getAttribute("action")),n.onreadystatechange=function(){4==n.readyState&&200==n.status&&(progressBar.classList.remove("active"),alert(n.responseText))},i.append("Filedata",e),i.append("sentViaAJAX","true"),t=document.getElementsByName("skew"))for(var a=0;a<t.length;a++)t[a].checked&&i.append("skew",t[a].value);if(t=document.getElementsByName("imagesizing"))for(a=0;a<t.length;a++)t[a].checked&&i.append("imagesizing",t[a].value);var o=document.getElementsByName("switchInput");o&&i.append("switchInput",o.value),n.send(i),progressBar.classList.add("active")}if(dragAndDropForm&&isAdvancedUpload&&(dragAndDropForm.classList.add("canDragAndDrop"),dragAndDropForm.addEventListener("dragenter",dragDropEnter,!1),dragAndDropForm.addEventListener("dragover",dragDropOver,!1),dragAndDropForm.addEventListener("dragleave",dragDropLeave,!1),dragAndDropForm.addEventListener("dragend",dragDropLeave,!1),dragAndDropForm.addEventListener("drop",dragDropDrop,!1)),function(){"use strict";var e,t=[];function n(){for(;t.length;)t[0](),t.shift()}function i(e){this.a=a,this.b=void 0,this.f=[];var t=this;try{e(function(e){!function e(t,n){if(t.a==a){if(n==t)throw new TypeError;var i=!1;try{var o=n&&n.then;if(null!=n&&"object"==typeof n&&"function"==typeof o)return void o.call(n,function(n){i||e(t,n),i=!0},function(e){i||r(t,e),i=!0})}catch(e){return void(i||r(t,e))}t.a=0,t.b=n,s(t)}}(t,e)},function(e){r(t,e)})}catch(e){r(t,e)}}e=function(){setTimeout(n)};var a=2;function o(e){return new i(function(t){t(e)})}function r(e,t){if(e.a==a){if(t==e)throw new TypeError;e.a=1,e.b=t,s(e)}}function s(n){!function(n){t.push(n),1==t.length&&e()}(function(){if(n.a!=a)for(;n.f.length;){var e=(o=n.f.shift())[0],t=o[1],i=o[2],o=o[3];try{0==n.a?i("function"==typeof e?e.call(void 0,n.b):n.b):1==n.a&&("function"==typeof t?i(t.call(void 0,n.b)):o(n.b))}catch(e){o(e)}}})}i.prototype.g=function(e){return this.c(void 0,e)},i.prototype.c=function(e,t){var n=this;return new i(function(i,a){n.f.push([e,t,i,a]),s(n)})},window.Promise||(window.Promise=i,window.Promise.resolve=o,window.Promise.reject=function(e){return new i(function(t,n){n(e)})},window.Promise.race=function(e){return new i(function(t,n){for(var i=0;i<e.length;i+=1)o(e[i]).c(t,n)})},window.Promise.all=function(e){return new i(function(t,n){function i(n){return function(i){r[n]=i,(a+=1)==e.length&&t(r)}}var a=0,r=[];0==e.length&&t(r);for(var s=0;s<e.length;s+=1)o(e[s]).c(i(s),n)})},window.Promise.prototype.then=i.prototype.c,window.Promise.prototype.catch=i.prototype.g)}(),function(){var e=!!document.addEventListener;function t(t,n){e?t.addEventListener("scroll",n,!1):t.attachEvent("scroll",n)}function n(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function i(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;left:-999px;white-space:nowrap;font:"+t+";"}function a(e){var t=e.a.offsetWidth,n=t+100;return e.f.style.width=n+"px",e.c.scrollLeft=n,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function o(e,n){function i(){var e=o;a(e)&&null!==e.a.parentNode&&n(e.g)}var o=e;t(e.b,i),t(e.c,i),a(e)}function r(e,t){var n=t||{};this.family=e,this.style=n.style||"normal",this.weight=n.weight||"normal",this.stretch=n.stretch||"normal"}var s=null,d=null,c=!!window.FontFace;function l(e,t){return[e.style,e.weight,function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?e.stretch:"","100px",t].join(" ")}r.prototype.load=function(t,a){var r=this,d=t||"BESbswy",u=a||3e3,g=(new Date).getTime();return new Promise(function(t,a){if(c){var h=new Promise(function(e,t){!function n(){(new Date).getTime()-g>=u?t():document.fonts.load(l(r,r.family),d).then(function(t){1<=t.length?e():setTimeout(n,25)},function(){t()})}()}),p=new Promise(function(e,t){setTimeout(t,u)});Promise.race([p,h]).then(function(){t(r)},function(){a(r)})}else!function(t){document.body?t():e?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"interactive"!=document.readyState&&"complete"!=document.readyState||t()})}(function(){function e(){var e;(e=-1!=m&&-1!=f||-1!=m&&-1!=v||-1!=f&&-1!=v)&&((e=m!=f&&m!=v&&f!=v)||(null===s&&(e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),s=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))),e=s&&(m==y&&f==y&&v==y||m==b&&f==b&&v==b||m==E&&f==E&&v==E)),e=!e),e&&(null!==w.parentNode&&w.parentNode.removeChild(w),clearTimeout(T),t(r))}var c=new n(d),h=new n(d),p=new n(d),m=-1,f=-1,v=-1,y=-1,b=-1,E=-1,w=document.createElement("div"),T=0;w.dir="ltr",i(c,l(r,"sans-serif")),i(h,l(r,"serif")),i(p,l(r,"monospace")),w.appendChild(c.a),w.appendChild(h.a),w.appendChild(p.a),document.body.appendChild(w),y=c.a.offsetWidth,b=h.a.offsetWidth,E=p.a.offsetWidth,function t(){if((new Date).getTime()-g>=u)null!==w.parentNode&&w.parentNode.removeChild(w),a(r);else{var n=document.hidden;!0!==n&&void 0!==n||(m=c.a.offsetWidth,f=h.a.offsetWidth,v=p.a.offsetWidth,e()),T=setTimeout(t,50)}}(),o(c,function(t){m=t,e()}),i(c,l(r,'"'+r.family+'",sans-serif')),o(h,function(t){f=t,e()}),i(h,l(r,'"'+r.family+'",serif')),o(p,function(t){v=t,e()}),i(p,l(r,'"'+r.family+'",monospace'))})})},window.FontFaceObserver=r,window.FontFaceObserver.prototype.check=window.FontFaceObserver.prototype.load=r.prototype.load,"undefined"!=typeof module&&(module.exports=window.FontFaceObserver)}(),ae.menuToggleElem=document.getElementById("menuToggle"),cutsTheMustard&&ae.menuToggleElem&&(ae.navigationIsRevealed=!1,ae.menuToggleElem.addEventListener("click",function(e){ae.checkToggleNavigation(),e&&e.preventDefault()},!1),ae.menuToggleElem.setAttribute("aria-expanded",!1),ae.menuToggleElem.setAttribute("aria-controls","navigation"),ae.checkToggleNavigation=function(){ae.navigationIsRevealed?(removeClass(document.documentElement,"offCanvas"),ae.navigationIsRevealed=!1,ae.menuToggleElem.setAttribute("aria-expanded",!1)):(addClass(document.documentElement,"offCanvas"),ae.navigationIsRevealed=!0,ae.menuToggleElem.setAttribute("aria-expanded",!0),document.querySelector("#navigation a").focus())},ae.checkCloseNavigation=function(e){ae.navigationIsRevealed&&"menuToggle"!=e.target.id&&(hasParent(e.target,"navigation")||(removeClass(document.documentElement,"offCanvas"),ae.navigationIsRevealed=!1,ae.menuToggleElem.setAttribute("aria-expanded",!1),e.preventDefault()))},document.addEventListener("click",function(e){ae.checkCloseNavigation(e)},!0),document.addEventListener("touchend",function(e){ae.checkCloseNavigation(e)}),ae.swipeLeft=function(){ae.navigationIsRevealed&&(removeClass(document.documentElement,"offCanvas"),ae.navigationIsRevealed=!1,ae.menuToggleElem.setAttribute("aria-expanded",!1))},"ontouchstart"in document.documentElement&&(document.body.addEventListener("touchstart",function(e){startPointX=e.touches[0].pageX,startPointY=e.touches[0].pageY,isScrolling="",deltaX=0},!1),document.body.addEventListener("touchmove",function(e){e.touches.length>1||e.scale&&1!==e.scale||(deltaX=e.touches[0].pageX-startPointX,""===isScrolling&&(isScrolling=isScrolling||Math.abs(deltaX)<Math.abs(e.touches[0].pageY-startPointY)),isScrolling||e.preventDefault())},!1),document.body.addEventListener("touchend",function(e){isScrolling||Math.abs(deltaX)>100&&deltaX<0&&ae.swipeLeft()},!1))),cutsTheMustard&&history.pushState&&document.getElementById("paginationEnhanced")){var whichContentToGet=document.getElementById("paginationEnhanced").previousElementSibling.id;function getMoreContent(){var e=document.getElementById("loadMore").innerHTML;document.getElementById("loadMore").setAttribute("disabled","disabled"),document.getElementById("loadMore").innerHTML="loading...";var t="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),n=window.location.pathname.toString(),i=n.indexOf("page/");if(-1!=i){pageToRequest=n.substr(i+5);var a=pageToRequest.indexOf("-");if(-1!=a){var o=pageToRequest.substr(0,a),r=pageToRequest.substr(a+1);pageToRequest=parseInt(r)+1}else o=parseInt(pageToRequest),pageToRequest=parseInt(pageToRequest)+1;sectionRoot=n.substr(0,i)}else o=1,pageToRequest=2,sectionRoot=n;"/"!=sectionRoot.slice(-1)&&(sectionRoot+="/"),t.open("GET","/includes/get"+whichContentToGet+".php?page="+pageToRequest,!0),t.onreadystatechange=function(){if(4===this.readyState)if(document.getElementById("loadMore").removeAttribute("disabled"),this.status>=200&&this.status<400){var t=this.responseText;if(""!=t){var n=JSON.parse(t);document.getElementsByClassName("paginatedBlock")[0].insertAdjacentHTML("beforeend",n.markup),urlUpdate=o+"-"+pageToRequest;history.replaceState({},"page "+urlUpdate,sectionRoot+"page/"+urlUpdate);var i=n.resultsRemaining;0==i?document.getElementById("paginationEnhanced").innerHTML="":document.getElementById("loadMore").innerHTML="load more ("+i+" more)",catalogueRoot&&bindHerbariumModal()}}else document.getElementById("loadMore").innerHTML=e},t.send(),t=null}resultsRemaining=document.getElementById("articlesRemaining").innerHTML,resultsRemaining>0?(document.getElementById("paginationEnhanced").innerHTML='<button id="loadMore">load more ('+resultsRemaining+" more)</button>",document.getElementById("loadMore").addEventListener("click",getMoreContent)):document.getElementById("paginationEnhanced").innerHTML=""}function windowPopup(e,t,n){var i=screen.width/2-t/2,a=screen.height/2-n/2;window.open(e,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,width="+t+",height="+n+",top="+a+",left="+i)}function openSocialPopup(e){e&&e.preventDefault(),windowPopup(this.getAttribute("href"),500,300)}function openLargerSocialPopup(e){e&&e.preventDefault(),windowPopup(this.getAttribute("href"),740,552)}function webShareAPI(e){if(void 0!==navigator.share){e&&e.preventDefault();var t=document.getElementsByTagName("meta");metaDescContent="Autumn Earth Community Site";for(var n=0;n<t.length;n++)"description"==t[n].getAttribute("name")&&(metaDescContent=t[n].getAttribute("content"));navigator.share({title:document.title,text:metaDescContent,url:window.location.href})}}function bindSocialLinks(){var e=document.querySelectorAll(".popupWindow");for(i=0;i<e.length;++i)e[i].addEventListener("click",openSocialPopup);var t=document.querySelector(".largerPopupWindow");t&&t.addEventListener("click",openLargerSocialPopup);var n=document.querySelectorAll(".shareLink");for(i=0;i<n.length;++i)n[i].addEventListener("click",webShareAPI)}bindSocialLinks();var artisan={init:function(){for(var e=document.querySelectorAll(".deleteImageFile"),t=0;t<e.length;t++)e[t].onclick=artisan.removeFile},removeFile:function(e){var t=e.target.getAttribute("data-filename");getJSON("/artisan/remove-file.php?filename="+t,function(t){t&&("true"==t.success?(e.target.style.display="none",e.target.previousElementSibling.style.display="none"):artisan.removeFileError(e.target))},function(t){artisan.removeFileError(e.target)})},removeFileError:function(e){e.insertAdjacentHTML("afterend",'<div class="error">Couldn\'t delete the file - please try again</div>')}};document.getElementById("artisanSection")&&artisan.init();var catalogueRoot=document.getElementById("herbariumCatalogue"),storedCurrentPage="/herbarium/";function bindHerbariumModal(){for(var e=catalogueRoot.getElementsByClassName("triggersModal"),t=0;t<e.length;t++)e[t].addEventListener("click",openPlantDetail,!1)}if(catalogueRoot){var animatedElement=document.getElementById("inkEffect"),modalWrapper=document.getElementById("modalWrapper"),plantModalDetails=document.getElementById("plantModalDetails"),animationEvent=whichAnimationEvent();function openPlantDetail(e){e&&e.preventDefault(),plantURL=this.getAttribute("data-url"),pageToRequest="/includes/herbarium/plant-detail.php?plant="+plantURL;var t="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");t.open("GET",pageToRequest,!0),t.onreadystatechange=function(){if(4===this.readyState&&this.status>=200&&this.status<400){var e=this.responseText;""!=e&&(plantModalDetails.innerHTML=e,bindSocialLinks())}},t.send(),t=null;var n=this.innerHTML;plantModalDetails.innerHTML=n,modalWrapper.className="opening",modalWrapper.removeAttribute("aria-hidden"),document.getElementById("offCanvasWrapper").setAttribute("aria-hidden","true"),storedCurrentPage=window.location.pathname.toString();history.replaceState({},"Plant detail ","/herbarium/"+plantURL)}function closePlantDetail(e){e&&e.preventDefault(),modalWrapper.className="closing",modalWrapper.setAttribute("aria-hidden","true"),document.getElementById("offCanvasWrapper").removeAttribute("aria-hidden");history.replaceState({},"Plant detail ",storedCurrentPage)}animationEvent&&animatedElement.addEventListener(animationEvent,function(){"closing"==modalWrapper.className&&(modalWrapper.className="")}),bindHerbariumModal(),document.getElementById("modalClose").addEventListener("click",closePlantDetail)}var bodyNormal=new FontFaceObserver("Merriweather"),bodyItalic=new FontFaceObserver("Merriweather",{style:"italic"}),titleNormal=new FontFaceObserver("AlegreyaSC");Promise.all([bodyNormal.load(),bodyItalic.load(),titleNormal.load()]).then(function(){document.documentElement.className+=" fontsLoaded",createCookie("fontLoaded","true",1)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/serviceWorker.min.js",{updateViaCache:"imports",scope:"/"}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("my-accessible-dialog");if(e){var t=document.getElementById("wrapper");new window.A11yDialog(e,t)}}),clearTimeout(fallbackTimeout),document.documentElement.className+=" js",console.log("%c%s","background: #000;color: #e06900; font-size: 24px; font-family: AlegreyaSC,georgia,palatino,'times new roman',serif;padding: 5px 16px;","Autumn Earth"),console.log("%c%s","background: #000;color: #ffffff; font-size: 16px; font-family: AlegreyaSC,georgia,palatino,'times new roman',serif;padding: 5px 16px;","Here be dragons");